<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Location Finder</title>
</head>
<body>

<button onclick="updateLocation()">Update</button>

<table id="resultsTable" border="1">
    <thead>
    <tr>
        <th>Lat</th>
        <th>Lon</th>
        <th>Distance (km)</th>
        <th>Address</th>
    </tr>
    </thead>
    <tbody>
    <!-- Results will be populated here -->
    </tbody>
</table>

<script>
    // Sample data of places
    const places = [
        { lat: 40.7128, lon: -74.0060, address: "New York, NY" },
        { lat: 34.0522, lon: -118.2437, address: "Los Angeles, CA" },
        // ... add more places here
    ];

    function getDistanceFromLatLonInKm(lat1, lon1, lat2, lon2) {
        var R = 6371; // Radius of the earth in km
        var dLat = deg2rad(lat2 - lat1);
        var dLon = deg2rad(lon2 - lon1);
        var a =
            Math.sin(dLat/2) * Math.sin(dLat/2) +
            Math.cos(deg2rad(lat1)) * Math.cos(deg2rad(lat2)) *
            Math.sin(dLon/2) * Math.sin(dLon/2)
        ;
        var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
        var d = R * c; // Distance in km
        return d;
    }

    function deg2rad(deg) {
        return deg * (Math.PI/180)
    }

    function updateLocation() {
        navigator.geolocation.getCurrentPosition(position => {
            const currentLat = position.coords.latitude;
            const currentLon = position.coords.longitude;

            places.forEach(place => {
                place.distance = getDistanceFromLatLonInKm(currentLat, currentLon, place.lat, place.lon);
            });

            // Sort by distance
            places.sort((a, b) => a.distance - b.distance);

            // Populate table
            const tbody = document.getElementById("resultsTable").querySelector("tbody");
            tbody.innerHTML = ''; // Clear previous results
            places.forEach(place => {
                const row = tbody.insertRow();
                row.insertCell().textContent = place.lat;
                row.insertCell().textContent = place.lon;
                row.insertCell().textContent = place.distance.toFixed(2);
                const addressCell = row.insertCell();
                addressCell.textContent = place.address;
                addressCell.style.cursor = "pointer";
                addressCell.onclick = () => {
                    navigator.clipboard.writeText(place.address);
                };
            });
        });
    }
</script>

</body>
</html>
