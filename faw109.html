<!--&lt;!&ndash;&lt;!&ndash;<!DOCTYPE html>&ndash;&gt;&ndash;&gt;-->

<!--&lt;!&ndash;&lt;!&ndash;&lt;!&ndash;WhatIsThis:&ndash;&gt;&ndash;&gt;-->

<!--&lt;!&ndash;&lt;!&ndash;    non-Chrome extension driver&ndash;&gt;&ndash;&gt;-->

<!--&lt;!&ndash;&lt;!&ndash;    pure html/js driver when input can be pasted.&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;    should work on ipad and iphone&ndash;&gt;&ndash;&gt;-->

<!--&lt;!&ndash;&lt;!&ndash;** faw106 built from faw106&ndash;&gt;&ndash;&gt;-->

<!--&lt;!&ndash;&lt;!&ndash;&ndash;&gt;&ndash;&gt;&ndash;&gt;-->

<!--&lt;!&ndash;&lt;!&ndash;<html lang="en">&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;<head>&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;  <meta charset="UTF-8">&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;  <meta name="viewport" content="width=device-width, initial-scale=1.0">&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;  <title>Movie Magic - faw109</title>&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;  <style>&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;    body {&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;      font-family: Arial, sans-serif;&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;      margin: 10px;&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;      width: 400px;&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;    }&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;    .hidden {&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;      display: none;&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;    }&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;    #queryInput {&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;      width: calc(100% - 20px);&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;      padding: 10px;&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;      font-size: 14px;&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;      margin-bottom: 10px;&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;    }&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;    #submitQuery {&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;      margin-bottom: 20px;&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;      padding: 10px;&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;      background-color: #0078d7;&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;      color: white;&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;      border: none;&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;      font-size: 14px;&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;      cursor: pointer;&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;    }&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;    #submitQuery:hover {&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;      background-color: #005a9e;&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;    }&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;    .movie-item {&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;      margin-bottom: 5px;&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;    }&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;    button {&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;      margin-top: 10px;&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;    }&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;    .radio-group {&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;      margin-bottom: 10px;&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;    }&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;    .radio-group label {&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;      margin-right: 10px;&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;    }&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;  </style>&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;</head>&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;<body>&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;<h3 id="popupTitle">Movie Magic 0.93</h3>&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;<br>&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;<button id="configureButton">Configure</button>&ndash;&gt;&ndash;&gt;-->

<!--&lt;!&ndash;&lt;!&ndash;<div class="radio-group">&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;  <label><input type="radio" name="queryType" value="movies" checked> Movies</label>&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;  <label><input type="radio" name="queryType" value="actors"> Actors</label>&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;  <label><input type="radio" name="queryType" value="other"> Other</label>&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;</div>&ndash;&gt;&ndash;&gt;-->

<!--&lt;!&ndash;&lt;!&ndash;<div id="inputContainer">&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;  <input id="queryInput" type="text" placeholder="Enter text here..." />&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;  <button id="submitQuery">Search</button>&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;</div>&ndash;&gt;&ndash;&gt;-->

<!--&lt;!&ndash;&lt;!&ndash;<div id="moviesList"></div>&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;<div class="spacer"></div>&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;<br>&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;<button id="getMoreInfo" class="hidden">Get More Info</button>&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;<button id="setAll">Set All</button> &lt;!&ndash; Added Set All Button &ndash;&gt;&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;<button id="clearAll">Clear All</button> &lt;!&ndash; Added Clear All Button &ndash;&gt;&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;<button id="openMovieTable">Open Movie Table</button>&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;<button id="openActorTable">Open Actor Table</button>&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;</body>&ndash;&gt;&ndash;&gt;-->

<!--&lt;!&ndash;&lt;!&ndash;<script src="js/util1.js"></script>&ndash;&gt;&ndash;&gt;-->


<!--&lt;!&ndash;&lt;!&ndash;<script>&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;  document.addEventListener("DOMContentLoaded", () => {&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;    const queryInput = document.getElementById("queryInput");&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;    const submitQuery = document.getElementById("submitQuery");&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;    const moviesList = document.getElementById("moviesList");&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;    const configureButton = document.getElementById("configureButton");&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;    const queryTypeRadios = document.getElementsByName("queryType");&ndash;&gt;&ndash;&gt;-->

<!--&lt;!&ndash;&lt;!&ndash;    configureButton.addEventListener("click", () => {&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;      chrome.windows.create({&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;        url: "config.html",&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;        type: "popup",&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;        width: 350,&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;        height: 400&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;      });&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;    });&ndash;&gt;&ndash;&gt;-->

<!--&lt;!&ndash;&lt;!&ndash;    function getSelectedQueryType() {&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;      return [...queryTypeRadios].find(radio => radio.checked)?.value || "movies";&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;    }&ndash;&gt;&ndash;&gt;-->

<!--&lt;!&ndash;&lt;!&ndash;    async function handleSearch() {&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;      const userQuery = queryInput.value.trim();&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;      const queryType = getSelectedQueryType();&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;      console.log(`Query Type: ${queryType}, Query: ${userQuery}`);&ndash;&gt;&ndash;&gt;-->

<!--&lt;!&ndash;&lt;!&ndash;      if (userQuery) {&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;        let results;&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;        try {&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;          results = await findTitles(userQuery, queryType);&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;        } catch (error) {&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;          alert(`Error fetching titles: ${error.message}`);&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;          return;&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;        }&ndash;&gt;&ndash;&gt;-->

<!--&lt;!&ndash;&lt;!&ndash;        moviesList.innerHTML = ""; // Clear previous results&ndash;&gt;&ndash;&gt;-->

<!--&lt;!&ndash;&lt;!&ndash;        if (queryType === "movies") {&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;          buildHtmlMovies(results, moviesList);&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;        } else if (queryType === "actors") {&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;          buildHtmlActors(results, moviesList);&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;        } else if (queryType === "other") {&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;          buildHtmlOthers(results, moviesList); // Placeholder for "Other"&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;        }&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;      } else {&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;        alert("Please enter a valid query.");&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;      }&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;    }&ndash;&gt;&ndash;&gt;-->

<!--&lt;!&ndash;&lt;!&ndash;    submitQuery.addEventListener("click", handleSearch);&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;    queryInput.addEventListener("keydown", (event) => {&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;      if (event.key === "Enter") {&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;        handleSearch();&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;      }&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;    });&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;  });&ndash;&gt;&ndash;&gt;-->

<!--&lt;!&ndash;&lt;!&ndash;  function buildHtmlMovies(movies, moviesList) {&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;    movies.forEach((movie) => {&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;      const item = document.createElement("div");&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;      item.className = "movie-item";&ndash;&gt;&ndash;&gt;-->

<!--&lt;!&ndash;&lt;!&ndash;      const checkbox = document.createElement("input");&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;      checkbox.type = "checkbox";&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;      checkbox.value = movie;&ndash;&gt;&ndash;&gt;-->

<!--&lt;!&ndash;&lt;!&ndash;      const link = document.createElement("a");&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;      link.textContent = movie;&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;      link.href = `https://faw987.github.io/faw106.html?title=${movie}&submit=true`;&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;      link.target = "_blank";&ndash;&gt;&ndash;&gt;-->

<!--&lt;!&ndash;&lt;!&ndash;      item.appendChild(checkbox);&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;      item.appendChild(link);&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;      moviesList.appendChild(item);&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;    });&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;  }&ndash;&gt;&ndash;&gt;-->

<!--&lt;!&ndash;&lt;!&ndash;  function buildHtmlActors(actors, moviesList) {&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;    actors.forEach((actor) => {&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;      const item = document.createElement("div");&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;      item.className = "movie-item";&ndash;&gt;&ndash;&gt;-->

<!--&lt;!&ndash;&lt;!&ndash;      const checkbox = document.createElement("input");&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;      checkbox.type = "checkbox";&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;      checkbox.value = actor;&ndash;&gt;&ndash;&gt;-->

<!--&lt;!&ndash;&lt;!&ndash;      const link = document.createElement("a");&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;      link.textContent = actor;&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;      link.href = `https://faw987.github.io/faw108.html?actor=${actor}&submit=true`;&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;      link.target = "_blank";&ndash;&gt;&ndash;&gt;-->

<!--&lt;!&ndash;&lt;!&ndash;      item.appendChild(checkbox);&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;      item.appendChild(link);&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;      moviesList.appendChild(item);&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;    });&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;  }&ndash;&gt;&ndash;&gt;-->

<!--&lt;!&ndash;&lt;!&ndash;  function buildHtmlOthers(others, moviesList) {&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;    others.forEach((other) => {&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;      const item = document.createElement("div");&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;      item.className = "movie-item";&ndash;&gt;&ndash;&gt;-->

<!--&lt;!&ndash;&lt;!&ndash;      const text = document.createElement("span");&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;      text.textContent = other;&ndash;&gt;&ndash;&gt;-->

<!--&lt;!&ndash;&lt;!&ndash;      item.appendChild(text);&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;      moviesList.appendChild(item);&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;    });&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;  }&ndash;&gt;&ndash;&gt;-->

<!--&lt;!&ndash;&lt;!&ndash;  async function findTitles(inputText, type) {&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;    const typePrompt = {&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;      movies: "Identify all movie titles",&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;      actors: "Identify all actor names",&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;      other: "Identify all other related items"&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;    }[type];&ndash;&gt;&ndash;&gt;-->

<!--&lt;!&ndash;&lt;!&ndash;    const apiKey2 = `${calcResults()}`; // Replace with your API key&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;    const response = await fetch("https://api.openai.com/v1/chat/completions", {&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;      method: "POST",&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;      headers: {&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;        "Content-Type": "application/json",&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;        Authorization: `Bearer ${apiKey2}`&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;      },&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;      body: JSON.stringify({&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;        model: "gpt-4o-mini",&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;        messages: [&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;          { role: "system", content: `${typePrompt} in the given text.` },&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;          {&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;            role: "user",&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;            content: `Extract ${typePrompt.toLowerCase()} from the following text:\n${inputText}.&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;                      List each on a separate line. No numbering or punctuation.`&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;          }&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;        ],&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;        max_tokens: 200&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;      })&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;    });&ndash;&gt;&ndash;&gt;-->

<!--&lt;!&ndash;&lt;!&ndash;    if (!response.ok) {&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;      throw new Error(`API error: ${response.statusText}`);&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;    }&ndash;&gt;&ndash;&gt;-->

<!--&lt;!&ndash;&lt;!&ndash;    const data = await response.json();&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;    const resultText = data.choices[0]?.message?.content?.trim();&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;    return resultText ? resultText.split("\n").map(line => line.trim()) : [];&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;  }&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;</script>&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;</html>&ndash;&gt;&ndash;&gt;-->

<!--&lt;!&ndash;<!DOCTYPE html>&ndash;&gt;-->
<!--&lt;!&ndash;<html lang="en">&ndash;&gt;-->
<!--&lt;!&ndash;<head>&ndash;&gt;-->
<!--&lt;!&ndash;  <meta charset="UTF-8">&ndash;&gt;-->
<!--&lt;!&ndash;  <meta name="viewport" content="width=device-width, initial-scale=1.0">&ndash;&gt;-->
<!--&lt;!&ndash;  <title>Movie Magic - faw109</title>&ndash;&gt;-->
<!--&lt;!&ndash;  <style>&ndash;&gt;-->
<!--&lt;!&ndash;    body {&ndash;&gt;-->
<!--&lt;!&ndash;      font-family: Arial, sans-serif;&ndash;&gt;-->
<!--&lt;!&ndash;      margin: 10px;&ndash;&gt;-->
<!--&lt;!&ndash;      width: 400px;&ndash;&gt;-->
<!--&lt;!&ndash;    }&ndash;&gt;-->
<!--&lt;!&ndash;    .hidden {&ndash;&gt;-->
<!--&lt;!&ndash;      display: none;&ndash;&gt;-->
<!--&lt;!&ndash;    }&ndash;&gt;-->
<!--&lt;!&ndash;    #queryInput {&ndash;&gt;-->
<!--&lt;!&ndash;      width: calc(100% - 20px);&ndash;&gt;-->
<!--&lt;!&ndash;      padding: 10px;&ndash;&gt;-->
<!--&lt;!&ndash;      font-size: 14px;&ndash;&gt;-->
<!--&lt;!&ndash;      margin-bottom: 10px;&ndash;&gt;-->
<!--&lt;!&ndash;    }&ndash;&gt;-->
<!--&lt;!&ndash;    #submitQuery {&ndash;&gt;-->
<!--&lt;!&ndash;      margin-bottom: 20px;&ndash;&gt;-->
<!--&lt;!&ndash;      padding: 10px;&ndash;&gt;-->
<!--&lt;!&ndash;      background-color: #0078d7;&ndash;&gt;-->
<!--&lt;!&ndash;      color: white;&ndash;&gt;-->
<!--&lt;!&ndash;      border: none;&ndash;&gt;-->
<!--&lt;!&ndash;      font-size: 14px;&ndash;&gt;-->
<!--&lt;!&ndash;      cursor: pointer;&ndash;&gt;-->
<!--&lt;!&ndash;    }&ndash;&gt;-->
<!--&lt;!&ndash;    #submitQuery:hover {&ndash;&gt;-->
<!--&lt;!&ndash;      background-color: #005a9e;&ndash;&gt;-->
<!--&lt;!&ndash;    }&ndash;&gt;-->
<!--&lt;!&ndash;    .movie-item {&ndash;&gt;-->
<!--&lt;!&ndash;      margin-bottom: 5px;&ndash;&gt;-->
<!--&lt;!&ndash;    }&ndash;&gt;-->
<!--&lt;!&ndash;    button {&ndash;&gt;-->
<!--&lt;!&ndash;      margin-top: 10px;&ndash;&gt;-->
<!--&lt;!&ndash;    }&ndash;&gt;-->
<!--&lt;!&ndash;    .radio-group {&ndash;&gt;-->
<!--&lt;!&ndash;      margin-bottom: 10px;&ndash;&gt;-->
<!--&lt;!&ndash;    }&ndash;&gt;-->
<!--&lt;!&ndash;    .radio-group label {&ndash;&gt;-->
<!--&lt;!&ndash;      margin-right: 10px;&ndash;&gt;-->
<!--&lt;!&ndash;    }&ndash;&gt;-->
<!--&lt;!&ndash;  </style>&ndash;&gt;-->
<!--&lt;!&ndash;</head>&ndash;&gt;-->
<!--&lt;!&ndash;<body>&ndash;&gt;-->
<!--&lt;!&ndash;<h3 id="popupTitle">Movie Magic 0.93</h3>&ndash;&gt;-->
<!--&lt;!&ndash;<br>&ndash;&gt;-->
<!--&lt;!&ndash;<button id="configureButton">Configure</button>&ndash;&gt;-->

<!--&lt;!&ndash;<div class="radio-group">&ndash;&gt;-->
<!--&lt;!&ndash;  <label><input type="radio" name="queryType" value="movies" checked> Movies</label>&ndash;&gt;-->
<!--&lt;!&ndash;  <label><input type="radio" name="queryType" value="actors"> Actors</label>&ndash;&gt;-->
<!--&lt;!&ndash;  <label><input type="radio" name="queryType" value="other"> Other</label>&ndash;&gt;-->
<!--&lt;!&ndash;</div>&ndash;&gt;-->

<!--&lt;!&ndash;<div id="inputContainer">&ndash;&gt;-->
<!--&lt;!&ndash;  <input id="queryInput" type="text" placeholder="Enter text or URL here..." />&ndash;&gt;-->
<!--&lt;!&ndash;  <button id="submitQuery">Search</button>&ndash;&gt;-->
<!--&lt;!&ndash;</div>&ndash;&gt;-->

<!--&lt;!&ndash;<div id="moviesList"></div>&ndash;&gt;-->
<!--&lt;!&ndash;<div class="spacer"></div>&ndash;&gt;-->
<!--&lt;!&ndash;<br>&ndash;&gt;-->
<!--&lt;!&ndash;<button id="getMoreInfo" class="hidden">Get More Info</button>&ndash;&gt;-->
<!--&lt;!&ndash;<button id="setAll">Set All</button>&ndash;&gt;-->
<!--&lt;!&ndash;<button id="clearAll">Clear All</button>&ndash;&gt;-->
<!--&lt;!&ndash;<button id="openMovieTable">Open Movie Table</button>&ndash;&gt;-->
<!--&lt;!&ndash;<button id="openActorTable">Open Actor Table</button>&ndash;&gt;-->
<!--&lt;!&ndash;</body>&ndash;&gt;-->

<!--&lt;!&ndash;<script src="js/util1.js"></script>&ndash;&gt;-->

<!--&lt;!&ndash;<script>&ndash;&gt;-->
<!--&lt;!&ndash;  document.addEventListener("DOMContentLoaded", () => {&ndash;&gt;-->
<!--&lt;!&ndash;    const queryInput = document.getElementById("queryInput");&ndash;&gt;-->
<!--&lt;!&ndash;    const submitQuery = document.getElementById("submitQuery");&ndash;&gt;-->
<!--&lt;!&ndash;    const moviesList = document.getElementById("moviesList");&ndash;&gt;-->
<!--&lt;!&ndash;    const configureButton = document.getElementById("configureButton");&ndash;&gt;-->
<!--&lt;!&ndash;    const queryTypeRadios = document.getElementsByName("queryType");&ndash;&gt;-->

<!--&lt;!&ndash;    configureButton.addEventListener("click", () => {&ndash;&gt;-->
<!--&lt;!&ndash;      chrome.windows.create({&ndash;&gt;-->
<!--&lt;!&ndash;        url: "config.html",&ndash;&gt;-->
<!--&lt;!&ndash;        type: "popup",&ndash;&gt;-->
<!--&lt;!&ndash;        width: 350,&ndash;&gt;-->
<!--&lt;!&ndash;        height: 400&ndash;&gt;-->
<!--&lt;!&ndash;      });&ndash;&gt;-->
<!--&lt;!&ndash;    });&ndash;&gt;-->

<!--&lt;!&ndash;    function getSelectedQueryType() {&ndash;&gt;-->
<!--&lt;!&ndash;      return [...queryTypeRadios].find(radio => radio.checked)?.value || "movies";&ndash;&gt;-->
<!--&lt;!&ndash;    }&ndash;&gt;-->

<!--&lt;!&ndash;    async function handleSearch() {&ndash;&gt;-->
<!--&lt;!&ndash;      const userQuery = queryInput.value.trim();&ndash;&gt;-->
<!--&lt;!&ndash;      const queryType = getSelectedQueryType();&ndash;&gt;-->
<!--&lt;!&ndash;      console.log(`Query Type: ${queryType}, Query: ${userQuery}`);&ndash;&gt;-->

<!--&lt;!&ndash;      if (!userQuery) {&ndash;&gt;-->
<!--&lt;!&ndash;        alert("Please enter a valid query.");&ndash;&gt;-->
<!--&lt;!&ndash;        return;&ndash;&gt;-->
<!--&lt;!&ndash;      }&ndash;&gt;-->

<!--&lt;!&ndash;      let inputText;&ndash;&gt;-->

<!--&lt;!&ndash;      if (isValidURL(userQuery)) {&ndash;&gt;-->
<!--&lt;!&ndash;        try {&ndash;&gt;-->
<!--&lt;!&ndash;          inputText = await fetchTextFromURL(userQuery);&ndash;&gt;-->
<!--&lt;!&ndash;          console.log(`inputText; ${inputText}`)&ndash;&gt;-->
<!--&lt;!&ndash;        } catch (error) {&ndash;&gt;-->
<!--&lt;!&ndash;          alert(`Error fetching URL content: ${error.message}`);&ndash;&gt;-->
<!--&lt;!&ndash;          return;&ndash;&gt;-->
<!--&lt;!&ndash;        }&ndash;&gt;-->
<!--&lt;!&ndash;      } else {&ndash;&gt;-->
<!--&lt;!&ndash;        inputText = userQuery;&ndash;&gt;-->
<!--&lt;!&ndash;      }&ndash;&gt;-->

<!--&lt;!&ndash;      let results;&ndash;&gt;-->
<!--&lt;!&ndash;      try {&ndash;&gt;-->
<!--&lt;!&ndash;        results = await findTitles(inputText, queryType);&ndash;&gt;-->
<!--&lt;!&ndash;      } catch (error) {&ndash;&gt;-->
<!--&lt;!&ndash;        alert(`Error fetching titles: ${error.message}`);&ndash;&gt;-->
<!--&lt;!&ndash;        return;&ndash;&gt;-->
<!--&lt;!&ndash;      }&ndash;&gt;-->

<!--&lt;!&ndash;      moviesList.innerHTML = ""; // Clear previous results&ndash;&gt;-->

<!--&lt;!&ndash;      if (queryType === "movies") {&ndash;&gt;-->
<!--&lt;!&ndash;        buildHtmlMovies(results, moviesList);&ndash;&gt;-->
<!--&lt;!&ndash;      } else if (queryType === "actors") {&ndash;&gt;-->
<!--&lt;!&ndash;        buildHtmlActors(results, moviesList);&ndash;&gt;-->
<!--&lt;!&ndash;      } else if (queryType === "other") {&ndash;&gt;-->
<!--&lt;!&ndash;        buildHtmlOthers(results, moviesList); // Placeholder for "Other"&ndash;&gt;-->
<!--&lt;!&ndash;      }&ndash;&gt;-->
<!--&lt;!&ndash;    }&ndash;&gt;-->

<!--&lt;!&ndash;    function isValidURL(string) {&ndash;&gt;-->
<!--&lt;!&ndash;      try {&ndash;&gt;-->
<!--&lt;!&ndash;        new URL(string);&ndash;&gt;-->
<!--&lt;!&ndash;        return true;&ndash;&gt;-->
<!--&lt;!&ndash;      } catch (_) {&ndash;&gt;-->
<!--&lt;!&ndash;        return false;&ndash;&gt;-->
<!--&lt;!&ndash;      }&ndash;&gt;-->
<!--&lt;!&ndash;    }&ndash;&gt;-->

<!--&lt;!&ndash;    async function fetchTextFromURL(url) {&ndash;&gt;-->
<!--&lt;!&ndash;      const response = await fetch(url);&ndash;&gt;-->
<!--&lt;!&ndash;      if (!response.ok) {&ndash;&gt;-->
<!--&lt;!&ndash;        throw new Error(`Failed to fetch URL: ${response.statusText}`);&ndash;&gt;-->
<!--&lt;!&ndash;      }&ndash;&gt;-->
<!--&lt;!&ndash;      const text = await response.text();&ndash;&gt;-->
<!--&lt;!&ndash;      const doc = new DOMParser().parseFromString(text, "text/html");&ndash;&gt;-->
<!--&lt;!&ndash;      const bodyText = doc.body.innerText || "";&ndash;&gt;-->
<!--&lt;!&ndash;      return bodyText.substring(0, 12000); // Limit to 1200 characters&ndash;&gt;-->
<!--&lt;!&ndash;    }&ndash;&gt;-->

<!--&lt;!&ndash;    submitQuery.addEventListener("click", handleSearch);&ndash;&gt;-->
<!--&lt;!&ndash;    queryInput.addEventListener("keydown", (event) => {&ndash;&gt;-->
<!--&lt;!&ndash;      if (event.key === "Enter") {&ndash;&gt;-->
<!--&lt;!&ndash;        handleSearch();&ndash;&gt;-->
<!--&lt;!&ndash;      }&ndash;&gt;-->
<!--&lt;!&ndash;    });&ndash;&gt;-->
<!--&lt;!&ndash;  });&ndash;&gt;-->

<!--&lt;!&ndash;  function buildHtmlMovies(movies, moviesList) {&ndash;&gt;-->
<!--&lt;!&ndash;    movies.forEach((movie) => {&ndash;&gt;-->
<!--&lt;!&ndash;      const item = document.createElement("div");&ndash;&gt;-->
<!--&lt;!&ndash;      item.className = "movie-item";&ndash;&gt;-->

<!--&lt;!&ndash;      const checkbox = document.createElement("input");&ndash;&gt;-->
<!--&lt;!&ndash;      checkbox.type = "checkbox";&ndash;&gt;-->
<!--&lt;!&ndash;      checkbox.value = movie;&ndash;&gt;-->

<!--&lt;!&ndash;      const link = document.createElement("a");&ndash;&gt;-->
<!--&lt;!&ndash;      link.textContent = movie;&ndash;&gt;-->
<!--&lt;!&ndash;      link.href = `https://faw987.github.io/faw106.html?title=${movie}&submit=true`;&ndash;&gt;-->
<!--&lt;!&ndash;      link.target = "_blank";&ndash;&gt;-->

<!--&lt;!&ndash;      item.appendChild(checkbox);&ndash;&gt;-->
<!--&lt;!&ndash;      item.appendChild(link);&ndash;&gt;-->
<!--&lt;!&ndash;      moviesList.appendChild(item);&ndash;&gt;-->
<!--&lt;!&ndash;    });&ndash;&gt;-->
<!--&lt;!&ndash;  }&ndash;&gt;-->

<!--&lt;!&ndash;  function buildHtmlActors(actors, moviesList) {&ndash;&gt;-->
<!--&lt;!&ndash;    actors.forEach((actor) => {&ndash;&gt;-->
<!--&lt;!&ndash;      const item = document.createElement("div");&ndash;&gt;-->
<!--&lt;!&ndash;      item.className = "movie-item";&ndash;&gt;-->

<!--&lt;!&ndash;      const checkbox = document.createElement("input");&ndash;&gt;-->
<!--&lt;!&ndash;      checkbox.type = "checkbox";&ndash;&gt;-->
<!--&lt;!&ndash;      checkbox.value = actor;&ndash;&gt;-->

<!--&lt;!&ndash;      const link = document.createElement("a");&ndash;&gt;-->
<!--&lt;!&ndash;      link.textContent = actor;&ndash;&gt;-->
<!--&lt;!&ndash;      link.href = `https://faw987.github.io/faw108.html?actor=${actor}&submit=true`;&ndash;&gt;-->
<!--&lt;!&ndash;      link.target = "_blank";&ndash;&gt;-->

<!--&lt;!&ndash;      item.appendChild(checkbox);&ndash;&gt;-->
<!--&lt;!&ndash;      item.appendChild(link);&ndash;&gt;-->
<!--&lt;!&ndash;      moviesList.appendChild(item);&ndash;&gt;-->
<!--&lt;!&ndash;    });&ndash;&gt;-->
<!--&lt;!&ndash;  }&ndash;&gt;-->

<!--&lt;!&ndash;  function buildHtmlOthers(others, moviesList) {&ndash;&gt;-->
<!--&lt;!&ndash;    others.forEach((other) => {&ndash;&gt;-->
<!--&lt;!&ndash;      const item = document.createElement("div");&ndash;&gt;-->
<!--&lt;!&ndash;      item.className = "movie-item";&ndash;&gt;-->

<!--&lt;!&ndash;      const text = document.createElement("span");&ndash;&gt;-->
<!--&lt;!&ndash;      text.textContent = other;&ndash;&gt;-->

<!--&lt;!&ndash;      item.appendChild(text);&ndash;&gt;-->
<!--&lt;!&ndash;      moviesList.appendChild(item);&ndash;&gt;-->
<!--&lt;!&ndash;    });&ndash;&gt;-->
<!--&lt;!&ndash;  }&ndash;&gt;-->

<!--&lt;!&ndash;  async function findTitles(inputText, type) {&ndash;&gt;-->
<!--&lt;!&ndash;    const typePrompt = {&ndash;&gt;-->
<!--&lt;!&ndash;      movies: "Identify all movie titles",&ndash;&gt;-->
<!--&lt;!&ndash;      actors: "Identify all actor names",&ndash;&gt;-->
<!--&lt;!&ndash;      other: "Identify all other related items"&ndash;&gt;-->
<!--&lt;!&ndash;    }[type];&ndash;&gt;-->

<!--&lt;!&ndash;    const apiKey2 = `${calcResults()}`; // Replace with your API key&ndash;&gt;-->
<!--&lt;!&ndash;    const response = await fetch("https://api.openai.com/v1/chat/completions", {&ndash;&gt;-->
<!--&lt;!&ndash;      method: "POST",&ndash;&gt;-->
<!--&lt;!&ndash;      headers: {&ndash;&gt;-->
<!--&lt;!&ndash;        "Content-Type": "application/json",&ndash;&gt;-->
<!--&lt;!&ndash;        Authorization: `Bearer ${apiKey2}`&ndash;&gt;-->
<!--&lt;!&ndash;      },&ndash;&gt;-->
<!--&lt;!&ndash;      body: JSON.stringify({&ndash;&gt;-->
<!--&lt;!&ndash;        model: "gpt-4o-mini",&ndash;&gt;-->
<!--&lt;!&ndash;        messages: [&ndash;&gt;-->
<!--&lt;!&ndash;          { role: "system", content: `${typePrompt} in the given text.` },&ndash;&gt;-->
<!--&lt;!&ndash;          {&ndash;&gt;-->
<!--&lt;!&ndash;            role: "user",&ndash;&gt;-->
<!--&lt;!&ndash;            content: `Extract ${typePrompt.toLowerCase()} from the following text:\n${inputText}.&ndash;&gt;-->
<!--&lt;!&ndash;                      List each on a separate line. No numbering or punctuation.`&ndash;&gt;-->
<!--&lt;!&ndash;          }&ndash;&gt;-->
<!--&lt;!&ndash;        ],&ndash;&gt;-->
<!--&lt;!&ndash;        max_tokens: 200&ndash;&gt;-->
<!--&lt;!&ndash;      })&ndash;&gt;-->
<!--&lt;!&ndash;    });&ndash;&gt;-->

<!--&lt;!&ndash;    if (!response.ok) {&ndash;&gt;-->
<!--&lt;!&ndash;      throw new Error(`API error: ${response.statusText}`);&ndash;&gt;-->
<!--&lt;!&ndash;    }&ndash;&gt;-->

<!--&lt;!&ndash;    const data = await response.json();&ndash;&gt;-->
<!--&lt;!&ndash;    const resultText = data.choices[0]?.message?.content?.trim();&ndash;&gt;-->
<!--&lt;!&ndash;    return resultText ? resultText.split("\n").map(line => line.trim()) : [];&ndash;&gt;-->
<!--&lt;!&ndash;  }&ndash;&gt;-->
<!--&lt;!&ndash;</script>&ndash;&gt;-->
<!--&lt;!&ndash;</html>&ndash;&gt;-->

<!--<!DOCTYPE html>-->
<!--<html lang="en">-->
<!--<head>-->
<!--  <meta charset="UTF-8">-->
<!--  <meta name="viewport" content="width=device-width, initial-scale=1.0">-->
<!--  <title>Movie Magic - faw109</title>-->
<!--  <style>-->
<!--    body {-->
<!--      font-family: Arial, sans-serif;-->
<!--      margin: 10px;-->
<!--      width: 400px;-->
<!--    }-->
<!--    .hidden {-->
<!--      display: none;-->
<!--    }-->
<!--    #queryInput {-->
<!--      width: calc(100% - 20px);-->
<!--      padding: 10px;-->
<!--      font-size: 14px;-->
<!--      margin-bottom: 10px;-->
<!--    }-->
<!--    #submitQuery {-->
<!--      margin-bottom: 20px;-->
<!--      padding: 10px;-->
<!--      background-color: #0078d7;-->
<!--      color: white;-->
<!--      border: none;-->
<!--      font-size: 14px;-->
<!--      cursor: pointer;-->
<!--    }-->
<!--    #submitQuery:hover {-->
<!--      background-color: #005a9e;-->
<!--    }-->
<!--    .movie-item {-->
<!--      margin-bottom: 5px;-->
<!--    }-->
<!--    button {-->
<!--      margin-top: 10px;-->
<!--    }-->
<!--    .radio-group {-->
<!--      margin-bottom: 10px;-->
<!--    }-->
<!--    .radio-group label {-->
<!--      margin-right: 10px;-->
<!--    }-->
<!--    iframe {-->
<!--      display: none; /* Hidden iframe for loading the page */-->
<!--      width: 100%;-->
<!--      height: 400px;-->
<!--      border: none;-->
<!--    }-->
<!--  </style>-->
<!--</head>-->
<!--<body>-->
<!--<h3 id="popupTitle">Movie Magic 0.93</h3>-->
<!--<br>-->
<!--<button id="configureButton">Configure</button>-->

<!--<div class="radio-group">-->
<!--  <label><input type="radio" name="queryType" value="movies" checked> Movies</label>-->
<!--  <label><input type="radio" name="queryType" value="actors"> Actors</label>-->
<!--  <label><input type="radio" name="queryType" value="other"> Other</label>-->
<!--</div>-->

<!--<div id="inputContainer">-->
<!--  <input id="queryInput" type="text" placeholder="Enter text or URL here..." />-->
<!--  <button id="submitQuery">Search</button>-->
<!--</div>-->

<!--<div id="moviesList"></div>-->
<!--<iframe id="renderFrame"></iframe>-->
<!--<div class="spacer"></div>-->
<!--<br>-->
<!--<button id="getMoreInfo" class="hidden">Get More Info</button>-->
<!--<button id="setAll">Set All</button>-->
<!--<button id="clearAll">Clear All</button>-->
<!--<button id="openMovieTable">Open Movie Table</button>-->
<!--<button id="openActorTable">Open Actor Table</button>-->
<!--</body>-->

<!--<script src="js/util1.js"></script>-->

<!--<script>-->
<!--  document.addEventListener("DOMContentLoaded", () => {-->
<!--    const queryInput = document.getElementById("queryInput");-->
<!--    const submitQuery = document.getElementById("submitQuery");-->
<!--    const moviesList = document.getElementById("moviesList");-->
<!--    const configureButton = document.getElementById("configureButton");-->
<!--    const renderFrame = document.getElementById("renderFrame");-->
<!--    const queryTypeRadios = document.getElementsByName("queryType");-->

<!--    configureButton.addEventListener("click", () => {-->
<!--      chrome.windows.create({-->
<!--        url: "config.html",-->
<!--        type: "popup",-->
<!--        width: 350,-->
<!--        height: 400-->
<!--      });-->
<!--    });-->

<!--    function getSelectedQueryType() {-->
<!--      return [...queryTypeRadios].find(radio => radio.checked)?.value || "movies";-->
<!--    }-->

<!--    async function handleSearch() {-->
<!--      const userQuery = queryInput.value.trim();-->
<!--      const queryType = getSelectedQueryType();-->
<!--      console.log(`Query Type: ${queryType}, Query: ${userQuery}`);-->

<!--      if (!userQuery) {-->
<!--        alert("Please enter a valid query.");-->
<!--        return;-->
<!--      }-->

<!--      let inputText;-->

<!--      if (isValidURL(userQuery)) {-->
<!--        try {-->
<!--          inputText = await renderAndExtractText(userQuery);-->
<!--        } catch (error) {-->
<!--          alert(`Error rendering URL content: ${error.message}`);-->
<!--          return;-->
<!--        }-->
<!--      } else {-->
<!--        inputText = userQuery;-->
<!--      }-->

<!--      let results;-->
<!--      try {-->
<!--        results = await findTitles(inputText, queryType);-->
<!--      } catch (error) {-->
<!--        alert(`Error fetching titles: ${error.message}`);-->
<!--        return;-->
<!--      }-->

<!--      moviesList.innerHTML = ""; // Clear previous results-->

<!--      if (queryType === "movies") {-->
<!--        buildHtmlMovies(results, moviesList);-->
<!--      } else if (queryType === "actors") {-->
<!--        buildHtmlActors(results, moviesList);-->
<!--      } else if (queryType === "other") {-->
<!--        buildHtmlOthers(results, moviesList);-->
<!--      }-->
<!--    }-->

<!--    function isValidURL(string) {-->
<!--      try {-->
<!--        new URL(string);-->
<!--        return true;-->
<!--      } catch (_) {-->
<!--        return false;-->
<!--      }-->
<!--    }-->

<!--    async function renderAndExtractText(url) {-->
<!--      return new Promise((resolve, reject) => {-->
<!--        renderFrame.src = url;-->
<!--        renderFrame.onload = () => {-->
<!--          try {-->
<!--            const doc = renderFrame.contentDocument || renderFrame.contentWindow.document;-->
<!--            const bodyText = Array.from(doc.body.querySelectorAll("*"))-->
<!--                    .map((el) => el.textContent.trim())-->
<!--                    .filter((text) => text.length > 0)-->
<!--                    .join("\n");-->
<!--            resolve(bodyText.substring(0, 1200)); // Limit to 1200 characters-->
<!--          } catch (error) {-->
<!--            reject(new Error("Failed to parse content from the rendered page."));-->
<!--          }-->
<!--        };-->
<!--        renderFrame.onerror = () => reject(new Error("Failed to load the URL in the iframe."));-->
<!--      });-->
<!--    }-->

<!--    submitQuery.addEventListener("click", handleSearch);-->
<!--    queryInput.addEventListener("keydown", (event) => {-->
<!--      if (event.key === "Enter") {-->
<!--        handleSearch();-->
<!--      }-->
<!--    });-->
<!--  });-->

<!--  function buildHtmlMovies(movies, moviesList) {-->
<!--    movies.forEach((movie) => {-->
<!--      const item = document.createElement("div");-->
<!--      item.className = "movie-item";-->

<!--      const checkbox = document.createElement("input");-->
<!--      checkbox.type = "checkbox";-->
<!--      checkbox.value = movie;-->

<!--      const link = document.createElement("a");-->
<!--      link.textContent = movie;-->
<!--      link.href = `https://faw987.github.io/faw106.html?title=${movie}&submit=true`;-->
<!--      link.target = "_blank";-->

<!--      item.appendChild(checkbox);-->
<!--      item.appendChild(link);-->
<!--      moviesList.appendChild(item);-->
<!--    });-->
<!--  }-->

<!--  function buildHtmlActors(actors, moviesList) {-->
<!--    actors.forEach((actor) => {-->
<!--      const item = document.createElement("div");-->
<!--      item.className = "movie-item";-->

<!--      const checkbox = document.createElement("input");-->
<!--      checkbox.type = "checkbox";-->
<!--      checkbox.value = actor;-->

<!--      const link = document.createElement("a");-->
<!--      link.textContent = actor;-->
<!--      link.href = `https://faw987.github.io/faw108.html?actor=${actor}&submit=true`;-->
<!--      link.target = "_blank";-->

<!--      item.appendChild(checkbox);-->
<!--      item.appendChild(link);-->
<!--      moviesList.appendChild(item);-->
<!--    });-->
<!--  }-->

<!--  function buildHtmlOthers(others, moviesList) {-->
<!--    others.forEach((other) => {-->
<!--      const item = document.createElement("div");-->
<!--      item.className = "movie-item";-->

<!--      const text = document.createElement("span");-->
<!--      text.textContent = other;-->

<!--      item.appendChild(text);-->
<!--      moviesList.appendChild(item);-->
<!--    });-->
<!--  }-->

<!--  async function findTitles(inputText, type) {-->
<!--    const typePrompt = {-->
<!--      movies: "Identify all movie titles",-->
<!--      actors: "Identify all actor names",-->
<!--      other: "Identify all other related items"-->
<!--    }[type];-->

<!--    const apiKey2 = `${calcResults()}`; // Replace with your API key-->
<!--    const response = await fetch("https://api.openai.com/v1/chat/completions", {-->
<!--      method: "POST",-->
<!--      headers: {-->
<!--        "Content-Type": "application/json",-->
<!--        Authorization: `Bearer ${apiKey2}`-->
<!--      },-->
<!--      body: JSON.stringify({-->
<!--        model: "gpt-4o-mini",-->
<!--        messages: [-->
<!--          { role: "system", content: `${typePrompt} in the given text.` },-->
<!--          {-->
<!--            role: "user",-->
<!--            content: `Extract ${typePrompt.toLowerCase()} from the following text:\n${inputText}.-->
<!--                      List each on a separate line. No numbering or punctuation.`-->
<!--          }-->
<!--        ],-->
<!--        max_tokens: 200-->
<!--      })-->
<!--    });-->

<!--    if (!response.ok) {-->
<!--      throw new Error(`API error: ${response.statusText}`);-->
<!--    }-->

<!--    const data = await response.json();-->
<!--    const resultText = data.choices[0]?.message?.content?.trim();-->
<!--    return resultText ? resultText.split("\n").map(line => line.trim()) : [];-->
<!--  }-->
<!--</script>-->
<!--</html>-->

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Render and Copy Page Content</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 10px;
    }
    #urlInput {
      width: calc(100% - 20px);
      padding: 10px;
      font-size: 14px;
      margin-bottom: 10px;
    }
    #loadUrlButton, #copyButton {
      padding: 10px;
      background-color: #0078d7;
      color: white;
      border: none;
      font-size: 14px;
      cursor: pointer;
      margin-right: 10px;
    }
    #loadUrlButton:hover, #copyButton:hover {
      background-color: #005a9e;
    }
    iframe {
      width: 100%;
      height: 400px;
      border: 1px solid #ccc;
      margin-top: 20px;
    }
    #plainText {
      width: calc(100% - 20px);
      height: 200px;
      margin-top: 20px;
      padding: 10px;
      font-size: 14px;
      font-family: monospace;
      white-space: pre-wrap;
    }
  </style>
</head>
<body>
<h3>Render and Copy Page Content</h3>
<p>Enter a URL, load the page, and extract its plain text for further use.</p>
<input id="urlInput" type="text" placeholder="Enter a URL..." />
<button id="loadUrlButton">Load URL</button>
<button id="copyButton" disabled>Copy Plain Text</button>
<iframe id="webpageDisplay"></iframe>
<textarea id="plainText" readonly placeholder="Plain text will appear here..."></textarea>

<script>
  document.getElementById("loadUrlButton").addEventListener("click", () => {
    const url = document.getElementById("urlInput").value.trim();
    const iframe = document.getElementById("webpageDisplay");
    const plainTextArea = document.getElementById("plainText");
    const copyButton = document.getElementById("copyButton");

    if (!url) {
      alert("Please enter a URL.");
      return;
    }

    try {
      new URL(url); // Validate URL
    } catch {
      alert("Invalid URL format. Please enter a valid URL.");
      return;
    }

    // Reset text area and load the URL into the iframe
    plainTextArea.value = "";
    iframe.src = url;

    iframe.onload = () => {
      try {
        const iframeDoc = iframe.contentDocument || iframe.contentWindow.document;

        // Extract plain text from the rendered iframe
        const plainText = Array.from(iframeDoc.body.querySelectorAll("*"))
                .map(el => el.textContent.trim())
                .filter(text => text.length > 0)
                .join("\n");

        // Display plain text in the textarea
        plainTextArea.value = plainText;
        copyButton.disabled = false; // Enable copy button
      } catch (error) {
        console.error("Error extracting text:", error);
        alert("Unable to extract text from the rendered page.");
      }
    };

    iframe.onerror = () => {
      alert("Failed to load the URL.");
    };
  });

  document.getElementById("copyButton").addEventListener("click", () => {
    const plainTextArea = document.getElementById("plainText");
    plainTextArea.select();
    document.execCommand("copy");
    alert("Plain text copied to clipboard!");
  });
</script>
</body>
</html>